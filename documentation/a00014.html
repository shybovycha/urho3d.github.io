<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Urho3D: %Scene model</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Urho3D
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Scene model </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Urho3D's scene model can be described as a component-based scene graph. The <a class="el" href="a00247.html" title="Root scene node, represents the whole scene.">Scene</a> consists of a hierarchy of scene nodes, starting from the root node, which also represents the whole scene. Each <a class="el" href="a00193.html" title="Scene node that may contain components and child nodes.">Node</a> has a 3D transform (position, rotation and scale), a name and an ID, and a freeform VariantMap for <a class="el" href="a00193.html#a4b1a508ba21834d35b46da264e915de3">user variables</a>, but no other functionality.</p>
<h1><a class="anchor" id="SceneModel_Components"></a>
Components</h1>
<p>Rendering 3D objects, sound playback, physics and scripted logic updates are all enabled by creating different <a class="el" href="a00085.html">Components</a> into the nodes by calling <a class="el" href="a00193.html#a5e08b7711f478b82f979417b7d3f8794">CreateComponent()</a>. As with events, in C++ components are identified by type name hashes, and template forms of the component creation and retrieval functions exist for convenience. For example:</p>
<div class="fragment"><div class="line">Light* light = node-&gt;CreateComponent&lt;Light&gt;();</div>
</div><!-- fragment --><p>In script, strings are used to identify component types instead, so the same code would look like: </p>
<div class="fragment"><div class="line">Light@ light = node.CreateComponent(<span class="stringliteral">&quot;Light&quot;</span>);</div>
</div><!-- fragment --><p>Because components are created using <a class="el" href="a00010.html">object factories</a>, a factory must be registered for each component type.</p>
<p>Components created into the <a class="el" href="a00247.html" title="Root scene node, represents the whole scene.">Scene</a> itself have a special role: to implement scene-wide functionality. They should be created before all other components, and include the following:</p>
<ul>
<li><a class="el" href="a00204.html" title="Octree component. Should be added only to the root scene node">Octree</a>: implements spatial partitioning and accelerated visibility queries. Without this 3D objects can not be rendered.</li>
<li><a class="el" href="a00217.html" title="Physics simulation world component. Should be added only to the root scene node.">PhysicsWorld</a>: implements physics simulation. Physics components such as <a class="el" href="a00246.html" title="Physics rigid body component.">RigidBody</a> or <a class="el" href="a00082.html" title="Physics collision shape component.">CollisionShape</a> can not function properly without this.</li>
<li><a class="el" href="a00106.html" title="Debug geometry rendering component. Should be added only to the root scene node.">DebugRenderer</a>: implements debug geometry rendering.</li>
</ul>
<p>"Ordinary" components like <a class="el" href="a00159.html" title="Light component.">Light</a>, <a class="el" href="a00078.html" title="Camera component.">Camera</a> or <a class="el" href="a00283.html" title="Static model component.">StaticModel</a> should not be created directly into the <a class="el" href="a00247.html" title="Root scene node, represents the whole scene.">Scene</a>, but rather into child nodes.</p>
<h1><a class="anchor" id="SceneModel_Identification"></a>
Identification and scene hierarchy</h1>
<p>Unlike nodes, components do not have names; components inside the same node are only identified by their type, and index in the node's component list, which is filled in creation order. See the various overloads of <a class="el" href="a00193.html#a96f75cc225a16978220dd771f76bdb18">GetComponent()</a> or <a class="el" href="a00193.html#a9f096d8f7c61f7be195c5f0e22a60404">GetComponents()</a> for details.</p>
<p>When created, both nodes and components get scene-global integer IDs. They can be queried from the <a class="el" href="a00247.html" title="Root scene node, represents the whole scene.">Scene</a> by using the functions GetNodeByID() and GetComponentByID(). This is much faster than for example doing recursive name-based scene node queries.</p>
<p>There is no inbuilt concept of an entity or a game object; rather it is up to the programmer to decide the node hierarchy, and in which nodes to place any scripted logic. Typically, free-moving objects in the 3D world would be created as children of the root node. Nodes can be created either with or without a name, see <a class="el" href="a00193.html#abf5b4b7cb68f7161ebaeb1db0fdc680d">CreateChild()</a>. Uniqueness of node names is not enforced.</p>
<p>Whenever there is some hierarchical composition, it is recommended (and in fact necessary, because components do not have their own 3D transforms) to create a child node. For example if a character was holding an object in his hand, the object should have its own node, which would be parented to the character's hand bone (also a <a class="el" href="a00193.html" title="Scene node that may contain components and child nodes.">Node</a>.) The exception is the physics <a class="el" href="a00082.html" title="Physics collision shape component.">CollisionShape</a>, which can be offsetted and rotated individually in relation to the node. See <a class="el" href="a00031.html">Physics</a> for more details. Note that <a class="el" href="a00247.html" title="Root scene node, represents the whole scene.">Scene</a>'s own transform is purposefully ignored as an optimization when calculating world derived transforms of child nodes, so changing it has no effect and it should be left as it is (position at origin, no rotation, no scaling.)</p>
<p>Scene nodes can be freely reparented. In contrast components are always created to the node they belong to, and can not be moved between nodes. Both child nodes and components are stored using <a class="el" href="a00269.html" title="Shared pointer template class with intrusive reference counting.">SharedPtr</a> containers; this means that detaching a child node from its parent or removing a component will also destroy it, if no other references to it exist. Both <a class="el" href="a00193.html" title="Scene node that may contain components and child nodes.">Node</a> &amp; <a class="el" href="a00085.html" title="Base class for components. Components can be created to scene nodes.">Component</a> provide the <a class="el" href="a00193.html#a926c3fc7ece12b5c4d0f9d05e54d8b56">Remove()</a> function to accomplish this without having to go through the parent. Note that no operations on the node or component in question are safe after calling that function.</p>
<p>It is also legal to create a <a class="el" href="a00193.html" title="Scene node that may contain components and child nodes.">Node</a> that does not belong to a scene. This is useful with cameras, because then the camera will not be serialized along with the actual scene, which is perhaps not always wanted. However, note that creating geometry, physics or script components to an unattached node, and then moving it into a scene later will cause those components to not work correctly.</p>
<h1><a class="anchor" id="SceneModel_Update"></a>
Scene updates and serialization</h1>
<p>A <a class="el" href="a00247.html" title="Root scene node, represents the whole scene.">Scene</a> whose updates are enabled (default) will be automatically updated on each main loop iteration. See <a class="el" href="a00247.html#a44c46009d055c833246a44cfd95db635">SetUpdateEnabled()</a>.</p>
<p>Nodes and components can be excluded from the scene update by disabling them, see <a class="el" href="a00193.html#aebf77521a93e12e059ce1bb953af5c4f">SetEnabled()</a>. Disabling for example a drawable component also makes it invisible, a sound source component becomes inaudible etc. If a node is disabled, all of its components are treated as disabled regardless of their own enable/disable state.</p>
<p>Scenes can be loaded and saved in either binary or XML format; see <a class="el" href="a00034.html">Serialization</a> for details.</p>
<h1><a class="anchor" id="SceneModel_FurtherInformation"></a>
Further information</h1>
<p>For more information on the component-based scene model, see for example <a href="http://cowboyprogramming.com/2007/01/05/evolve-your-heirachy/">http://cowboyprogramming.com/2007/01/05/evolve-your-heirachy/</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 19 2013 23:56:44 for Urho3D by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
